[{"categories":["Go"],"content":"\r$ Goæ˜¯ä»€ä¹ˆ\rå¼•ç”¨\rGoï¼ˆåˆç§°Golangï¼‰æ˜¯Googleå¼€å‘çš„ä¸€ç§é™æ€å¼ºç±»å‹ã€ç¼–è¯‘å‹ã€å¹¶å‘å‹ï¼Œå¹¶å…·æœ‰åƒåœ¾å›æ”¶åŠŸèƒ½çš„ç¼–ç¨‹è¯­è¨€ ä¸»è¦åˆ›å§‹äººæ˜¯ç½—ä¼¯ç‰¹Â·æ ¼ç‘å²è«ã€ç½—å‹ƒÂ·æ´¾å…‹åŠè‚¯Â·æ±¤æ™®é€Š â€‹ â€“ ç»´åŸºç™¾ç§‘ Go ","date":"2022-09-25","objectID":"/go-overview/:1:0","series":null,"tags":["Go","å…¥é—¨"],"title":"Go æ¦‚è§ˆ","uri":"/go-overview/#-goæ˜¯ä»€ä¹ˆ"},{"categories":["Go"],"content":"\r$ Goçš„ä¼˜ç‚¹ ä»¥ â€œå°‘å³æ˜¯å¤šâ€ ä¸ºç†å¿µï¼Œè¯­æ³•ç®€æ´ï¼Œå®¹æ˜“ä¸Šæ‰‹ è¯­æ³•å’Œç»“æ„ç±»C ï¼ˆCæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ ğŸ˜Š å†…ç½®é«˜å¹¶å‘ ï¼ˆä½ ä¸è§‰å¾—åŒæ—¶åšä¸€åƒä¸‡ä»¶äº‹å¾ˆé…·coolå— ğŸ˜ å†…ç½®æ”¯æŒUTF-8 é€‚ç”¨äºäº‘å¼€å‘ï¼Œwebåç«¯ï¼Œ é¢å‘å¯¹è±¡ï¼Œå‡½æ•°å¼â€¦ â€¦â€¦ ","date":"2022-09-25","objectID":"/go-overview/:2:0","series":null,"tags":["Go","å…¥é—¨"],"title":"Go æ¦‚è§ˆ","uri":"/go-overview/#-goçš„ä¼˜ç‚¹"},{"categories":["Go"],"content":"\r$ Goæ€ä¹ˆå­¦","date":"2022-09-25","objectID":"/go-overview/:3:0","series":null,"tags":["Go","å…¥é—¨"],"title":"Go æ¦‚è§ˆ","uri":"/go-overview/#-goæ€ä¹ˆå­¦"},{"categories":["Go"],"content":"\r$ å‰è¨€å…¶å®å­¦Goæœ€å¥½çš„åœ°æ–¹å°±æ˜¯Goå®˜ç½‘ ","date":"2022-09-25","objectID":"/go-overview/:3:1","series":null,"tags":["Go","å…¥é—¨"],"title":"Go æ¦‚è§ˆ","uri":"/go-overview/#-å‰è¨€"},{"categories":["Go"],"content":"\r$ å…¥é—¨ Tour of Go English | ä¸­æ–‡ Goå®˜æ–¹çš„å…¥é—¨ä¹‹æ—…ã€‚çœ‹å®Œå°±åŸºæœ¬å­¦å®Œäº†Goçš„æ‰€æœ‰è¯­æ³•ï¼ˆå°±æ˜¯è¿™ä¹ˆç®€æ´ä¸ç®€å• Learn X in Y Minutes English | ä¸­æ–‡ ","date":"2022-09-25","objectID":"/go-overview/:3:2","series":null,"tags":["Go","å…¥é—¨"],"title":"Go æ¦‚è§ˆ","uri":"/go-overview/#-å…¥é—¨"},{"categories":["Go"],"content":"\r$ åˆè¯†Goçš„å¹¶å‘ Go Concurrency Patterns Rob Pike(Goçš„3ä¸ªä¸»è¦åˆ›å§‹äººä¹‹ä¸€) çš„ä¸€åœºå…³äºGoçš„å¹¶å‘æ¨¡å¼çš„æ¼”è®²ï¼ŒGoogle I/O 2012 ","date":"2022-09-25","objectID":"/go-overview/:3:3","series":null,"tags":["Go","å…¥é—¨"],"title":"Go æ¦‚è§ˆ","uri":"/go-overview/#-åˆè¯†goçš„å¹¶å‘"},{"categories":["Go"],"content":"\r$ æ›´è¿›ä¸€æ­¥äº†è§£Go Go Programming å¦ä¸€åœºæ¼”è®²ï¼ŒGoogle I/O 2010 ã€ŠGoç¨‹åºè®¾è®¡è¯­è¨€ã€‹ Goé¢†åŸŸå…¬è®¤çš„ â€œåœ£ç»â€ ï¼ˆå»ºè®®ç›´æ¥ä¹°çº¸è´¨ä¹¦ Meet The Go Team Goå›¢é˜Ÿå°±ä¸€äº›Goè®¾è®¡é—®é¢˜çš„ç°åœºæé—®ä¸å›ç­” ï¼ˆé‡ç‚¹æ˜¯çœ‹å¤§ä½¬ ï¼šï¼‰ é«˜æ€§èƒ½Go å¯¹å¦‚ä½•æé«˜goçš„æ€§èƒ½æ–¹é¢è¿›è¡Œäº†ç ”ç©¶ Goæ–¹é¢è¾ƒä¸ºå…¨é¢çš„æ–‡æ‘˜ ","date":"2022-09-25","objectID":"/go-overview/:3:4","series":null,"tags":["Go","å…¥é—¨"],"title":"Go æ¦‚è§ˆ","uri":"/go-overview/#-æ›´è¿›ä¸€æ­¥äº†è§£go"},{"categories":["Go"],"content":"\r$ Goçš„æœªæ¥å°½ç®¡Goéå¸¸ä¼˜ç§€ï¼ˆ (;Â¬_Â¬) ä¸å‡†è´¨ç–‘ï¼‰ï¼Œä½†æ˜¯Goä¹Ÿæœ‰ç¾ä¸­ä¸è¶³çš„åœ°æ–¹ï¼Œæ¯”å¦‚Goçš„é”™è¯¯å¤„ç† ä½†æ˜¯Goåœ¨ä¸æ–­æ”¹å–„ï¼ˆä»¥æ¯ä¸‰ä¸ªæœˆä¸€æ¬¡å°ç‰ˆæœ¬çš„å½¢å¼ï¼Œå°¤å…¶æ˜¯å³å°†åˆ°æ¥çš„Go2å……æ»¡äº†ä»¤äººæ¿€åŠ¨çš„ç‰¹æ€§ Go2çš„ä¸€äº›è‰æ¡ˆ è®©æˆ‘ä»¬å……æ»¡æœŸå¾…â€¦(* ^ Ï‰ ^) Go ","date":"2022-09-25","objectID":"/go-overview/:4:0","series":null,"tags":["Go","å…¥é—¨"],"title":"Go æ¦‚è§ˆ","uri":"/go-overview/#-goçš„æœªæ¥"},{"categories":["Go"],"content":"\r$ å‰è¨€è®°å½•ä¸€ä¸‹goå¹¶å‘çš„å®è·µç»éªŒ ","date":"2022-07-29","objectID":"/go-concurrency/:1:0","series":null,"tags":["Go","å¹¶å‘"],"title":"Goå¹¶å‘ç»éªŒ","uri":"/go-concurrency/#-å‰è¨€"},{"categories":["Go"],"content":"\r$ å†…å®¹ å½“å‡ºç°æ­»é”æ—¶ï¼Œè€ƒè™‘æ˜¯å¦å·²ç”¨makeå°†å£°æ˜çš„chanåˆå§‹åŒ– æ°¸è¿œåœ¨ä¸åŒçš„goroutineä¸­å‘é€å’Œæ¥æ”¶chanä¸­çš„å€¼ï¼Œä¸è¦è¯•å›¾åœ¨mainä¸­å‘é€å¹¶æ¥æ”¶å€¼ å¦‚æœchanæ˜¯æ— ç¼“å†²çš„ï¼Œæ€»æ˜¯å…ˆè¿è¡Œä¸€ä¸ªgoroutineæ¥å‘é€æˆ–æ¥æ”¶å€¼ï¼Œç„¶åå†åœ¨main(æˆ–å…¶å®ƒgoroutine)ä¸­æ¥æ”¶æˆ–å‘é€ æƒ³è¦åœ¨mainä¸­åŒæ—¶æ”¶å‘chanä¸­çš„å€¼ï¼Œè€ƒè™‘ä½¿ç”¨ç¼“å†²é€šé“ æ€»æ˜¯è€ƒè™‘ä¸¤ä¸ªäº’ç›¸æ”¶å‘çš„chanä¹‹é—´é€ æˆçš„æ­»é”é—®é¢˜(æ¯”å¦‚ä¸¤ä¸ªchanåŒæ—¶å‘é€ç»™å¯¹æ–¹ï¼Œæ­¤æ—¶æ²¡æœ‰äººæ¥æ”¶)ï¼Œå¯ä»¥é€šè¿‡å°†ä¸€ä¸ªå‘é€æ“ä½œæ”¾åœ¨å•ç‹¬çš„goroutineä¸­æ¥è§£å†³ å…¶ä»–goroutineçš„é˜»å¡å®Œå…¨ä¸ä¼šå½±å“åˆ°ä¸»goroutine è€ƒè™‘ç”¨closeå…³é—­chanæ¥å¹¿æ’­çš„æŠ€å·§ æ³¨æ„å…¨å±€å˜é‡å¼•èµ·çš„æ•°æ®ç«æ€é—®é¢˜ï¼ŒæŒ‡å…¨å±€å˜é‡å¯èƒ½è¢«å¤šä¸ªgoroutineåŒæ—¶è¯»å†™(è‡³å°‘ä¸€ä¸ªå†™å…¥)ã€‚ä¼˜å…ˆä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œæˆ–ä½¿ç”¨åªè¯»å…¨å±€å˜é‡ ","date":"2022-07-29","objectID":"/go-concurrency/:1:1","series":null,"tags":["Go","å¹¶å‘"],"title":"Goå¹¶å‘ç»éªŒ","uri":"/go-concurrency/#-å†…å®¹"},{"categories":["Go"],"content":"\r$ å‰è¨€è®°å½•ä¸€ä¸‹goä¸­çš„è¯·æ±‚å’Œå“åº”å¤„ç† ","date":"2022-07-30","objectID":"/go-request-responce/:1:0","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-å‰è¨€"},{"categories":["Go"],"content":"\r$ è¯·æ±‚","date":"2022-07-30","objectID":"/go-request-responce/:2:0","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-è¯·æ±‚"},{"categories":["Go"],"content":"\r$ Requestç»“æ„ Requestç»“æ„æ—¢å¯ä»¥ç”¨äºå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨äºæœåŠ¡ç«¯ Requestç»“æ„ type Request struct { // Method specifies the HTTP method (GET, POST, PUT, etc.). Method string URL *url.URL /*#*/ Proto string // \"HTTP/1.0\" ProtoMajor int // 1 ProtoMinor int // 0 // Request Header Header Header /*#*/ // Request Body Body io.ReadCloser /*#*/ // return a new copy of Body // used for client requests // For server requests, it is unused GetBody func() (io.ReadCloser, error) // value -1 indicates that the length is unknown // Values \u003e= 0 indicate that the given number of bytes may // be read from Body ContentLength int64 TransferEncoding []string // Close indicates whether to close the connection after // replying to this request (for servers) or after sending this // request and reading its response (for clients). // // For server requests, the HTTP server handles this automatically // and this field is not needed by Handlers. // // For client requests, setting this field prevents re-use of // TCP connections between requests to the same hosts, as if // Transport.DisableKeepAlives were set. Close bool // thisis either the value of the \"Host\" header // or the host namegiven in the URL itself Host string // including both the URL field's query parameters // and the PATCH, POST, or PUT form data Form url.Values /*#*/ // PostForm contains the parsed form data from PATCH, POST // or PUT body parameters PostForm url.Values /*#*/ // MultipartForm is the parsed multipart form, including file uploads MultipartForm *multipart.Form /*#*/ // Trailer specifies additional headers // that are sent after the request body Trailer Header // RemoteAddr allows HTTP servers and other software to record // the network address that sent the request RemoteAddr string RequestURI string TLS *tls.ConnectionState Cancel \u003c-chan struct{} // Response is the redirect response which caused this request // to be created. This field is only populated during client // redirects. Response *Response } $ URLå­—æ®µ URLç»“æ„ä½“ type URL struct { Scheme string Opaque string User *Userinfo Host string Path string RawQuery string Fragment string } URLçš„ä¸€èˆ¬ç»“æ„ scheme://[ userinfo@]host/path[$query][#fragment] $ Headerå­—æ®µ ä¸€ä¸ª é¦–éƒ¨å°±æ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œ è¿™ä¸ªæ˜ å°„çš„é”®ä¸ºå­—ç¬¦ä¸²ï¼Œ å€¼ä¸ºå­—ç¬¦ä¸²åˆ‡ç‰‡ $ è·å–å’Œè®¾ç½®æˆ–ä¿®æ”¹Headerä¸­å­—æ®µ é€šè¿‡åˆ‡ç‰‡è®¿é—®Headerä¸­çš„ç‰¹å®šå­—æ®µï¼Œè¿”å›åˆ‡ç‰‡ w.Header[\"Accept-Encodeing\"] ç»“æœï¼š[gzip, deflate] é€šè¿‡Getå’ŒSetæ–¹æ³•ï¼ŒGetè¿”å›é€—å·åˆ†éš”çš„å­—ç¬¦ä¸² w.Header.Get(\"Accept-Encodeing\") ç»“æœï¼šgzip, deflate $ Bodyå­—æ®µ Bodyæ˜¯ä¸€ä¸ªReadCloser æ¥å£ï¼Œ è¯¥æ¥å£æ—¢åŒ…å«äº†Readeræ¥å£ï¼Œä¹ŸåŒ…å«äº†Closeræ¥å£ ä¸€ä¸ªä¾‹å­ package main import ( \"fmt\" \"net/http\" ) func body(w http.ResponseWriter, r *http.Request) { len := r.ContentLength body := make([]byte, len) r.Body.Read(body) fmt.Fprintln(w, string(body)) } func main() { server := http.Server{ Addr: \"127.0.0.1:8080\", } http.HandleFunc(\"/body\", body) server.ListenAndServe() } ","date":"2022-07-30","objectID":"/go-request-responce/:2:1","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-requestç»“æ„"},{"categories":["Go"],"content":"\r$ Requestç»“æ„ Requestç»“æ„æ—¢å¯ä»¥ç”¨äºå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨äºæœåŠ¡ç«¯ Requestç»“æ„ type Request struct { // Method specifies the HTTP method (GET, POST, PUT, etc.). Method string URL *url.URL /*#*/ Proto string // \"HTTP/1.0\" ProtoMajor int // 1 ProtoMinor int // 0 // Request Header Header Header /*#*/ // Request Body Body io.ReadCloser /*#*/ // return a new copy of Body // used for client requests // For server requests, it is unused GetBody func() (io.ReadCloser, error) // value -1 indicates that the length is unknown // Values \u003e= 0 indicate that the given number of bytes may // be read from Body ContentLength int64 TransferEncoding []string // Close indicates whether to close the connection after // replying to this request (for servers) or after sending this // request and reading its response (for clients). // // For server requests, the HTTP server handles this automatically // and this field is not needed by Handlers. // // For client requests, setting this field prevents re-use of // TCP connections between requests to the same hosts, as if // Transport.DisableKeepAlives were set. Close bool // thisis either the value of the \"Host\" header // or the host namegiven in the URL itself Host string // including both the URL field's query parameters // and the PATCH, POST, or PUT form data Form url.Values /*#*/ // PostForm contains the parsed form data from PATCH, POST // or PUT body parameters PostForm url.Values /*#*/ // MultipartForm is the parsed multipart form, including file uploads MultipartForm *multipart.Form /*#*/ // Trailer specifies additional headers // that are sent after the request body Trailer Header // RemoteAddr allows HTTP servers and other software to record // the network address that sent the request RemoteAddr string RequestURI string TLS *tls.ConnectionState Cancel \u003c-chan struct{} // Response is the redirect response which caused this request // to be created. This field is only populated during client // redirects. Response *Response } $ URLå­—æ®µ URLç»“æ„ä½“ type URL struct { Scheme string Opaque string User *Userinfo Host string Path string RawQuery string Fragment string } URLçš„ä¸€èˆ¬ç»“æ„ scheme://[ userinfo@]host/path[$query][#fragment] $ Headerå­—æ®µ ä¸€ä¸ª é¦–éƒ¨å°±æ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œ è¿™ä¸ªæ˜ å°„çš„é”®ä¸ºå­—ç¬¦ä¸²ï¼Œ å€¼ä¸ºå­—ç¬¦ä¸²åˆ‡ç‰‡ $ è·å–å’Œè®¾ç½®æˆ–ä¿®æ”¹Headerä¸­å­—æ®µ é€šè¿‡åˆ‡ç‰‡è®¿é—®Headerä¸­çš„ç‰¹å®šå­—æ®µï¼Œè¿”å›åˆ‡ç‰‡ w.Header[\"Accept-Encodeing\"] ç»“æœï¼š[gzip, deflate] é€šè¿‡Getå’ŒSetæ–¹æ³•ï¼ŒGetè¿”å›é€—å·åˆ†éš”çš„å­—ç¬¦ä¸² w.Header.Get(\"Accept-Encodeing\") ç»“æœï¼šgzip, deflate $ Bodyå­—æ®µ Bodyæ˜¯ä¸€ä¸ªReadCloser æ¥å£ï¼Œ è¯¥æ¥å£æ—¢åŒ…å«äº†Readeræ¥å£ï¼Œä¹ŸåŒ…å«äº†Closeræ¥å£ ä¸€ä¸ªä¾‹å­ package main import ( \"fmt\" \"net/http\" ) func body(w http.ResponseWriter, r *http.Request) { len := r.ContentLength body := make([]byte, len) r.Body.Read(body) fmt.Fprintln(w, string(body)) } func main() { server := http.Server{ Addr: \"127.0.0.1:8080\", } http.HandleFunc(\"/body\", body) server.ListenAndServe() } ","date":"2022-07-30","objectID":"/go-request-responce/:2:1","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-urlå­—æ®µ"},{"categories":["Go"],"content":"\r$ Requestç»“æ„ Requestç»“æ„æ—¢å¯ä»¥ç”¨äºå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨äºæœåŠ¡ç«¯ Requestç»“æ„ type Request struct { // Method specifies the HTTP method (GET, POST, PUT, etc.). Method string URL *url.URL /*#*/ Proto string // \"HTTP/1.0\" ProtoMajor int // 1 ProtoMinor int // 0 // Request Header Header Header /*#*/ // Request Body Body io.ReadCloser /*#*/ // return a new copy of Body // used for client requests // For server requests, it is unused GetBody func() (io.ReadCloser, error) // value -1 indicates that the length is unknown // Values \u003e= 0 indicate that the given number of bytes may // be read from Body ContentLength int64 TransferEncoding []string // Close indicates whether to close the connection after // replying to this request (for servers) or after sending this // request and reading its response (for clients). // // For server requests, the HTTP server handles this automatically // and this field is not needed by Handlers. // // For client requests, setting this field prevents re-use of // TCP connections between requests to the same hosts, as if // Transport.DisableKeepAlives were set. Close bool // thisis either the value of the \"Host\" header // or the host namegiven in the URL itself Host string // including both the URL field's query parameters // and the PATCH, POST, or PUT form data Form url.Values /*#*/ // PostForm contains the parsed form data from PATCH, POST // or PUT body parameters PostForm url.Values /*#*/ // MultipartForm is the parsed multipart form, including file uploads MultipartForm *multipart.Form /*#*/ // Trailer specifies additional headers // that are sent after the request body Trailer Header // RemoteAddr allows HTTP servers and other software to record // the network address that sent the request RemoteAddr string RequestURI string TLS *tls.ConnectionState Cancel \u003c-chan struct{} // Response is the redirect response which caused this request // to be created. This field is only populated during client // redirects. Response *Response } $ URLå­—æ®µ URLç»“æ„ä½“ type URL struct { Scheme string Opaque string User *Userinfo Host string Path string RawQuery string Fragment string } URLçš„ä¸€èˆ¬ç»“æ„ scheme://[ userinfo@]host/path[$query][#fragment] $ Headerå­—æ®µ ä¸€ä¸ª é¦–éƒ¨å°±æ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œ è¿™ä¸ªæ˜ å°„çš„é”®ä¸ºå­—ç¬¦ä¸²ï¼Œ å€¼ä¸ºå­—ç¬¦ä¸²åˆ‡ç‰‡ $ è·å–å’Œè®¾ç½®æˆ–ä¿®æ”¹Headerä¸­å­—æ®µ é€šè¿‡åˆ‡ç‰‡è®¿é—®Headerä¸­çš„ç‰¹å®šå­—æ®µï¼Œè¿”å›åˆ‡ç‰‡ w.Header[\"Accept-Encodeing\"] ç»“æœï¼š[gzip, deflate] é€šè¿‡Getå’ŒSetæ–¹æ³•ï¼ŒGetè¿”å›é€—å·åˆ†éš”çš„å­—ç¬¦ä¸² w.Header.Get(\"Accept-Encodeing\") ç»“æœï¼šgzip, deflate $ Bodyå­—æ®µ Bodyæ˜¯ä¸€ä¸ªReadCloser æ¥å£ï¼Œ è¯¥æ¥å£æ—¢åŒ…å«äº†Readeræ¥å£ï¼Œä¹ŸåŒ…å«äº†Closeræ¥å£ ä¸€ä¸ªä¾‹å­ package main import ( \"fmt\" \"net/http\" ) func body(w http.ResponseWriter, r *http.Request) { len := r.ContentLength body := make([]byte, len) r.Body.Read(body) fmt.Fprintln(w, string(body)) } func main() { server := http.Server{ Addr: \"127.0.0.1:8080\", } http.HandleFunc(\"/body\", body) server.ListenAndServe() } ","date":"2022-07-30","objectID":"/go-request-responce/:2:1","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-headerå­—æ®µ"},{"categories":["Go"],"content":"\r$ Requestç»“æ„ Requestç»“æ„æ—¢å¯ä»¥ç”¨äºå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨äºæœåŠ¡ç«¯ Requestç»“æ„ type Request struct { // Method specifies the HTTP method (GET, POST, PUT, etc.). Method string URL *url.URL /*#*/ Proto string // \"HTTP/1.0\" ProtoMajor int // 1 ProtoMinor int // 0 // Request Header Header Header /*#*/ // Request Body Body io.ReadCloser /*#*/ // return a new copy of Body // used for client requests // For server requests, it is unused GetBody func() (io.ReadCloser, error) // value -1 indicates that the length is unknown // Values \u003e= 0 indicate that the given number of bytes may // be read from Body ContentLength int64 TransferEncoding []string // Close indicates whether to close the connection after // replying to this request (for servers) or after sending this // request and reading its response (for clients). // // For server requests, the HTTP server handles this automatically // and this field is not needed by Handlers. // // For client requests, setting this field prevents re-use of // TCP connections between requests to the same hosts, as if // Transport.DisableKeepAlives were set. Close bool // thisis either the value of the \"Host\" header // or the host namegiven in the URL itself Host string // including both the URL field's query parameters // and the PATCH, POST, or PUT form data Form url.Values /*#*/ // PostForm contains the parsed form data from PATCH, POST // or PUT body parameters PostForm url.Values /*#*/ // MultipartForm is the parsed multipart form, including file uploads MultipartForm *multipart.Form /*#*/ // Trailer specifies additional headers // that are sent after the request body Trailer Header // RemoteAddr allows HTTP servers and other software to record // the network address that sent the request RemoteAddr string RequestURI string TLS *tls.ConnectionState Cancel \u003c-chan struct{} // Response is the redirect response which caused this request // to be created. This field is only populated during client // redirects. Response *Response } $ URLå­—æ®µ URLç»“æ„ä½“ type URL struct { Scheme string Opaque string User *Userinfo Host string Path string RawQuery string Fragment string } URLçš„ä¸€èˆ¬ç»“æ„ scheme://[ userinfo@]host/path[$query][#fragment] $ Headerå­—æ®µ ä¸€ä¸ª é¦–éƒ¨å°±æ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œ è¿™ä¸ªæ˜ å°„çš„é”®ä¸ºå­—ç¬¦ä¸²ï¼Œ å€¼ä¸ºå­—ç¬¦ä¸²åˆ‡ç‰‡ $ è·å–å’Œè®¾ç½®æˆ–ä¿®æ”¹Headerä¸­å­—æ®µ é€šè¿‡åˆ‡ç‰‡è®¿é—®Headerä¸­çš„ç‰¹å®šå­—æ®µï¼Œè¿”å›åˆ‡ç‰‡ w.Header[\"Accept-Encodeing\"] ç»“æœï¼š[gzip, deflate] é€šè¿‡Getå’ŒSetæ–¹æ³•ï¼ŒGetè¿”å›é€—å·åˆ†éš”çš„å­—ç¬¦ä¸² w.Header.Get(\"Accept-Encodeing\") ç»“æœï¼šgzip, deflate $ Bodyå­—æ®µ Bodyæ˜¯ä¸€ä¸ªReadCloser æ¥å£ï¼Œ è¯¥æ¥å£æ—¢åŒ…å«äº†Readeræ¥å£ï¼Œä¹ŸåŒ…å«äº†Closeræ¥å£ ä¸€ä¸ªä¾‹å­ package main import ( \"fmt\" \"net/http\" ) func body(w http.ResponseWriter, r *http.Request) { len := r.ContentLength body := make([]byte, len) r.Body.Read(body) fmt.Fprintln(w, string(body)) } func main() { server := http.Server{ Addr: \"127.0.0.1:8080\", } http.HandleFunc(\"/body\", body) server.ListenAndServe() } ","date":"2022-07-30","objectID":"/go-request-responce/:2:1","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-è·å–å’Œè®¾ç½®æˆ–ä¿®æ”¹headerä¸­å­—æ®µ"},{"categories":["Go"],"content":"\r$ Requestç»“æ„ Requestç»“æ„æ—¢å¯ä»¥ç”¨äºå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨äºæœåŠ¡ç«¯ Requestç»“æ„ type Request struct { // Method specifies the HTTP method (GET, POST, PUT, etc.). Method string URL *url.URL /*#*/ Proto string // \"HTTP/1.0\" ProtoMajor int // 1 ProtoMinor int // 0 // Request Header Header Header /*#*/ // Request Body Body io.ReadCloser /*#*/ // return a new copy of Body // used for client requests // For server requests, it is unused GetBody func() (io.ReadCloser, error) // value -1 indicates that the length is unknown // Values \u003e= 0 indicate that the given number of bytes may // be read from Body ContentLength int64 TransferEncoding []string // Close indicates whether to close the connection after // replying to this request (for servers) or after sending this // request and reading its response (for clients). // // For server requests, the HTTP server handles this automatically // and this field is not needed by Handlers. // // For client requests, setting this field prevents re-use of // TCP connections between requests to the same hosts, as if // Transport.DisableKeepAlives were set. Close bool // thisis either the value of the \"Host\" header // or the host namegiven in the URL itself Host string // including both the URL field's query parameters // and the PATCH, POST, or PUT form data Form url.Values /*#*/ // PostForm contains the parsed form data from PATCH, POST // or PUT body parameters PostForm url.Values /*#*/ // MultipartForm is the parsed multipart form, including file uploads MultipartForm *multipart.Form /*#*/ // Trailer specifies additional headers // that are sent after the request body Trailer Header // RemoteAddr allows HTTP servers and other software to record // the network address that sent the request RemoteAddr string RequestURI string TLS *tls.ConnectionState Cancel \u003c-chan struct{} // Response is the redirect response which caused this request // to be created. This field is only populated during client // redirects. Response *Response } $ URLå­—æ®µ URLç»“æ„ä½“ type URL struct { Scheme string Opaque string User *Userinfo Host string Path string RawQuery string Fragment string } URLçš„ä¸€èˆ¬ç»“æ„ scheme://[ userinfo@]host/path[$query][#fragment] $ Headerå­—æ®µ ä¸€ä¸ª é¦–éƒ¨å°±æ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œ è¿™ä¸ªæ˜ å°„çš„é”®ä¸ºå­—ç¬¦ä¸²ï¼Œ å€¼ä¸ºå­—ç¬¦ä¸²åˆ‡ç‰‡ $ è·å–å’Œè®¾ç½®æˆ–ä¿®æ”¹Headerä¸­å­—æ®µ é€šè¿‡åˆ‡ç‰‡è®¿é—®Headerä¸­çš„ç‰¹å®šå­—æ®µï¼Œè¿”å›åˆ‡ç‰‡ w.Header[\"Accept-Encodeing\"] ç»“æœï¼š[gzip, deflate] é€šè¿‡Getå’ŒSetæ–¹æ³•ï¼ŒGetè¿”å›é€—å·åˆ†éš”çš„å­—ç¬¦ä¸² w.Header.Get(\"Accept-Encodeing\") ç»“æœï¼šgzip, deflate $ Bodyå­—æ®µ Bodyæ˜¯ä¸€ä¸ªReadCloser æ¥å£ï¼Œ è¯¥æ¥å£æ—¢åŒ…å«äº†Readeræ¥å£ï¼Œä¹ŸåŒ…å«äº†Closeræ¥å£ ä¸€ä¸ªä¾‹å­ package main import ( \"fmt\" \"net/http\" ) func body(w http.ResponseWriter, r *http.Request) { len := r.ContentLength body := make([]byte, len) r.Body.Read(body) fmt.Fprintln(w, string(body)) } func main() { server := http.Server{ Addr: \"127.0.0.1:8080\", } http.HandleFunc(\"/body\", body) server.ListenAndServe() } ","date":"2022-07-30","objectID":"/go-request-responce/:2:1","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-bodyå­—æ®µ"},{"categories":["Go"],"content":"\r$ Goä¸HTMLè¡¨å•\r$ HTMLè¡¨å•çš„ä¸€èˆ¬å½¢å¼ \u003cform action=\"/process\" method=\"post\" enctype=\"application/x-www-form-urlencoded\"\u003e \u003cinput type=\"text\" name=\"first_name\"/\u003e \u003cinput type=\"text\" name=\"last_name\"/\u003e \u003cinput type=\"submit\"/\u003e \u003c/form\u003e $ æ•°æ®ç¼–ç æ–¹å¼ application/x-www-form-urlencoded å°†HTMLä¸­è¡¨å•ä¸­çš„æ•°æ®ç¼–ç ä¸ºè¿ç»­çš„é•¿æŸ¥è¯¢å­—ç¬¦ä¸² multipart/form-data å°†è¡¨å•ä¸­çš„æ•°æ®è½¬æ¢ä¸ºä¸€æ¡MIMEæŠ¥æ–‡ï¼Œè¡¨å•ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹éƒ½æ„æˆäº†è¿™æ¡æŠ¥æ–‡çš„ä¸€éƒ¨åˆ† text/plain HTML5æ”¯æŒ å¦‚ä½•é€‰æ‹© $ application/x-www-form-urlencoded ï¼ˆç®€å•æ–‡æœ¬æ•°æ® multipart/form-data ï¼ˆä¼ è¾“å¤§é‡æ•°æ®ï¼Œå¦‚ä¸Šä¼ æ–‡ä»¶ text/plain ï¼ˆ``Base64`ç¼–ç ï¼Œæ–‡æœ¬æ–¹å¼ä¼ è¾“äºŒè¿›åˆ¶æ•°æ® ","date":"2022-07-30","objectID":"/go-request-responce/:2:2","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-goä¸htmlè¡¨å•"},{"categories":["Go"],"content":"\r$ Goä¸HTMLè¡¨å•\r$ HTMLè¡¨å•çš„ä¸€èˆ¬å½¢å¼ $ æ•°æ®ç¼–ç æ–¹å¼ application/x-www-form-urlencoded å°†HTMLä¸­è¡¨å•ä¸­çš„æ•°æ®ç¼–ç ä¸ºè¿ç»­çš„é•¿æŸ¥è¯¢å­—ç¬¦ä¸² multipart/form-data å°†è¡¨å•ä¸­çš„æ•°æ®è½¬æ¢ä¸ºä¸€æ¡MIMEæŠ¥æ–‡ï¼Œè¡¨å•ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹éƒ½æ„æˆäº†è¿™æ¡æŠ¥æ–‡çš„ä¸€éƒ¨åˆ† text/plain HTML5æ”¯æŒ å¦‚ä½•é€‰æ‹© $ application/x-www-form-urlencoded ï¼ˆç®€å•æ–‡æœ¬æ•°æ® multipart/form-data ï¼ˆä¼ è¾“å¤§é‡æ•°æ®ï¼Œå¦‚ä¸Šä¼ æ–‡ä»¶ text/plain ï¼ˆ``Base64`ç¼–ç ï¼Œæ–‡æœ¬æ–¹å¼ä¼ è¾“äºŒè¿›åˆ¶æ•°æ® ","date":"2022-07-30","objectID":"/go-request-responce/:2:2","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-htmlè¡¨å•çš„ä¸€èˆ¬å½¢å¼"},{"categories":["Go"],"content":"\r$ Goä¸HTMLè¡¨å•\r$ HTMLè¡¨å•çš„ä¸€èˆ¬å½¢å¼ $ æ•°æ®ç¼–ç æ–¹å¼ application/x-www-form-urlencoded å°†HTMLä¸­è¡¨å•ä¸­çš„æ•°æ®ç¼–ç ä¸ºè¿ç»­çš„é•¿æŸ¥è¯¢å­—ç¬¦ä¸² multipart/form-data å°†è¡¨å•ä¸­çš„æ•°æ®è½¬æ¢ä¸ºä¸€æ¡MIMEæŠ¥æ–‡ï¼Œè¡¨å•ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹éƒ½æ„æˆäº†è¿™æ¡æŠ¥æ–‡çš„ä¸€éƒ¨åˆ† text/plain HTML5æ”¯æŒ å¦‚ä½•é€‰æ‹© $ application/x-www-form-urlencoded ï¼ˆç®€å•æ–‡æœ¬æ•°æ® multipart/form-data ï¼ˆä¼ è¾“å¤§é‡æ•°æ®ï¼Œå¦‚ä¸Šä¼ æ–‡ä»¶ text/plain ï¼ˆ``Base64`ç¼–ç ï¼Œæ–‡æœ¬æ–¹å¼ä¼ è¾“äºŒè¿›åˆ¶æ•°æ® ","date":"2022-07-30","objectID":"/go-request-responce/:2:2","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-æ•°æ®ç¼–ç æ–¹å¼"},{"categories":["Go"],"content":"\r$ è¡¨å•çš„è§£æ\r$ æ‰‹åŠ¨è§£æ application/x-www-form-urlencodedç¼–ç  å…ˆè°ƒç”¨w.ParseForm()æ–¹æ³• é€šè¿‡w.Formå­—æ®µè®¿é—®è¡¨å•æ•°æ®å’ŒURLå‚æ•° æˆ–è€…é€šè¿‡w.PostFormå­—æ®µå®ç°åªè®¿é—®è¡¨å•æ•°æ® multipart/form-dataç¼–ç  å…ˆè°ƒç”¨w.ParseMultipartForm()æ–¹æ³• é€šè¿‡w.MultipartFormå­—æ®µè®¿é—®è¡¨å•æ•°æ®æˆ–è·å–ä¸Šä¼ çš„æ–‡ä»¶ $ è‡ªåŠ¨è§£æ FormValue(key string) PostFormValue(key string) è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨ParseForm()å’ŒParseMultipartForm()æ–¹æ³•è¿›è¡Œè§£æ æ³¨ï¼šå¦‚æœå¯¹åº”è¯¥é”®çš„å€¼ä¸æ­¢ä¸€ä¸ªï¼Œæ–¹æ³•åªè¿”å›ç¬¬ä¸€ä¸ªå€¼ ","date":"2022-07-30","objectID":"/go-request-responce/:2:3","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-è¡¨å•çš„è§£æ"},{"categories":["Go"],"content":"\r$ è¡¨å•çš„è§£æ\r$ æ‰‹åŠ¨è§£æ application/x-www-form-urlencodedç¼–ç  å…ˆè°ƒç”¨w.ParseForm()æ–¹æ³• é€šè¿‡w.Formå­—æ®µè®¿é—®è¡¨å•æ•°æ®å’ŒURLå‚æ•° æˆ–è€…é€šè¿‡w.PostFormå­—æ®µå®ç°åªè®¿é—®è¡¨å•æ•°æ® multipart/form-dataç¼–ç  å…ˆè°ƒç”¨w.ParseMultipartForm()æ–¹æ³• é€šè¿‡w.MultipartFormå­—æ®µè®¿é—®è¡¨å•æ•°æ®æˆ–è·å–ä¸Šä¼ çš„æ–‡ä»¶ $ è‡ªåŠ¨è§£æ FormValue(key string) PostFormValue(key string) è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨ParseForm()å’ŒParseMultipartForm()æ–¹æ³•è¿›è¡Œè§£æ æ³¨ï¼šå¦‚æœå¯¹åº”è¯¥é”®çš„å€¼ä¸æ­¢ä¸€ä¸ªï¼Œæ–¹æ³•åªè¿”å›ç¬¬ä¸€ä¸ªå€¼ ","date":"2022-07-30","objectID":"/go-request-responce/:2:3","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-æ‰‹åŠ¨è§£æ"},{"categories":["Go"],"content":"\r$ è¡¨å•çš„è§£æ\r$ æ‰‹åŠ¨è§£æ application/x-www-form-urlencodedç¼–ç  å…ˆè°ƒç”¨w.ParseForm()æ–¹æ³• é€šè¿‡w.Formå­—æ®µè®¿é—®è¡¨å•æ•°æ®å’ŒURLå‚æ•° æˆ–è€…é€šè¿‡w.PostFormå­—æ®µå®ç°åªè®¿é—®è¡¨å•æ•°æ® multipart/form-dataç¼–ç  å…ˆè°ƒç”¨w.ParseMultipartForm()æ–¹æ³• é€šè¿‡w.MultipartFormå­—æ®µè®¿é—®è¡¨å•æ•°æ®æˆ–è·å–ä¸Šä¼ çš„æ–‡ä»¶ $ è‡ªåŠ¨è§£æ FormValue(key string) PostFormValue(key string) è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨ParseForm()å’ŒParseMultipartForm()æ–¹æ³•è¿›è¡Œè§£æ æ³¨ï¼šå¦‚æœå¯¹åº”è¯¥é”®çš„å€¼ä¸æ­¢ä¸€ä¸ªï¼Œæ–¹æ³•åªè¿”å›ç¬¬ä¸€ä¸ªå€¼ ","date":"2022-07-30","objectID":"/go-request-responce/:2:3","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-è‡ªåŠ¨è§£æ"},{"categories":["Go"],"content":"\r$ æ–‡ä»¶ä¸Šä¼ å’Œæ¥æ”¶ä¸¾ä¸ªä¾‹å­ HTMLè¡¨å• \u003chtml\u003e \u003chead\u003e \u003cmeta http-equiv=\"Content-Type\" content=\" text/html; charset=utf-8\"/\u003e \u003c title\u003eGo Web Programming\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003cform action=\"http://localhost:8080/process$hello=world\u0026thread=123\" method=\"post\" enctype=\"multipart/form-data\"\u003e \u003cinput type=\"text\" name=\"hello\" value=\"sau sheong\"/\u003e \u003cinput type=\"text\" name=\"post\" value=\"456\"/\u003e \u003cinput type=\"file\" name=\"uploaded\"/\u003e \u003cinput type=\"submit\"/\u003e \u003c/form\u003e \u003c/body\u003e \u003c/html\u003e Goå¤„ç† package main import( \"fmt\" \"io/util\" \"net/http\" ) func process(w http.ResponseWriter, r *http.Request) { r.ParseMultipartForm(1024) fileHeader := r.MultipartForm.File(\"uploaded\")[0] file, err := fileHeader.Open() if err == nil { data, err := ioutil.ReadAll(file) if err == nil { fmt.Fprintln(w, string(data)) } } } func main() { server := http.Server{ Addr: \"127.0.0.1\" } http.HandleFunc(\"/process\", process) server.ListenAndServe() } æˆ–è€…ç”¨FormFile()æ–¹æ³• func process(w http.ResponseWriter, r *http.Request) { file, _, err := r.FormFile(\"uploaded\") if err == nil { data, err := ioutil.ReadAll(file) if err == nil { fmt.Fprintln(w, string(data)) } } } å½“æ–‡ä»¶åªæœ‰ä¸€ä¸ªæ—¶è¿™ç‰¹åˆ«æœ‰ç”¨ ","date":"2022-07-30","objectID":"/go-request-responce/:2:4","series":null,"tags":["Go","Web"],"title":"Goä¸­çš„è¯·æ±‚å’Œå“åº”","uri":"/go-request-responce/#-æ–‡ä»¶ä¸Šä¼ å’Œæ¥æ”¶"},{"categories":["Go"],"content":"\r$ å‰è¨€æœ€è¿‘çœ‹äº†ä¸‹Go Webç¼–ç¨‹è¿™æœ¬ä¹¦ï¼Œå†å»çœ‹äº†ä¸‹æºç ï¼Œæƒ³å¯¹net/httpåŒ…ä¸­çš„ä¸€äº›å…³é”®çš„å‡½æ•°ï¼Œæ¥å£çš„å®šä¹‰å’Œå…³ç³»åšä¸€ä¸ªè®°å½• ","date":"2022-07-30","objectID":"/go-web/:1:0","series":null,"tags":["Go","Web"],"title":"Go Webç¼–ç¨‹","uri":"/go-web/#-å‰è¨€"},{"categories":["Go"],"content":"\r$ å¤šè·¯å¤ç”¨å™¨ Goä¸­webåº”ç”¨éœ€è¦å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚å“åº”ï¼Œä¸ºäº†å°†ä¸åŒè¯·æ±‚URLè½¬å‘åˆ°ä¸åŒçš„å¤„ç†å™¨(Handler)è¿›è¡Œå¤„ç†éœ€è¦ç”¨åˆ°å¤šè·¯å¤ç”¨å™¨(ServeMux) (var) DefaultServeMux: ListenAndServe(string, Handler) error ä¸­ç¬¬äºŒä¸ªå‚æ•°çš„é»˜è®¤å€¼ï¼Œå®è´¨æ˜¯ä¸€ä¸ªæŒ‡å‘ServeMuxç±»å‹çš„æŒ‡é’ˆï¼Œæ˜¯ServeMuxçš„ä¸€ä¸ªå®ä¾‹ï¼Œä½†ServeMuxåŒæ—¶åˆå®ç°äº†Handleræ¥å£(æ•…å¯ä»¥å……å½“ç¬¬äºŒä¸ªå‚æ•°çš„é»˜è®¤å€¼) æºç : // DefaultServeMux is the default ServeMux used by Serve. var DefaultServeMux = \u0026defaultServeMux var defaultServeMux ServeMux (func) NewServeMux(): è¿”å›ä¸€ä¸ªServeMux (struct) ServeMux: å¤šè·¯å¤ç”¨å™¨ç»“æ„ï¼Œè´Ÿè´£URLçš„è·¯å¾„å’Œå¤„ç†çš„æ˜ å°„ï¼Œä»¥åŠé€šè¿‡è‡ªèº«çš„ServeHTTPæ–¹æ³•è°ƒç”¨URLæ˜ å°„å¯¹åº”çš„å¤„ç†å™¨çš„ServeHTTPæ–¹æ³• æºç : type ServeMux struct { mu sync.RWMutex m map[string]muxEntry es []muxEntry // slice of entries sorted from longest to shortest. hosts bool // whether any patterns contain hostnames } ","date":"2022-07-30","objectID":"/go-web/:1:1","series":null,"tags":["Go","Web"],"title":"Go Webç¼–ç¨‹","uri":"/go-web/#-å¤šè·¯å¤ç”¨å™¨"},{"categories":["Go"],"content":"\r$ æœåŠ¡å™¨ è´Ÿè´£å¯åŠ¨ç›‘å¬å’Œé…ç½®æœåŠ¡ å¦‚æœç®€å•é…ç½®å¯ä»¥ç›´æ¥è°ƒhttp.ListenAndServeå‡½æ•°æ¥è¿›è¡Œç›‘å¬ï¼Œå¤æ‚é…ç½®åˆ™éœ€è¦æ„å»ºä¸€ä¸ªServerç»“æ„ä½“æ¥è°ƒç”¨å…¶ListenAndServeæ–¹æ³• (struct) Server: ç”¨äºç»†åŒ–é…ç½®çš„ç»“æ„ä½“ æºç : type Server struct { Addr string Handler Handler TLSConfig *tls.Config ReadTimeout time.Duration ReadHeaderTimeout time.Duration WriteTimeout time.Duration IdleTimeout time.Duration MaxHeaderBytes int TLSNextProto map[string]func(*Server, *tls.Conn, Handler) ConnState func(net.Conn, ConnState) ErrorLog *log.Logger BaseContext func(net.Listener) context.Context ConnContext func(ctx context.Context, c net.Conn) context.Context } (func) ListenAndServe(addr string, handler Handler) error: å¼€å¯ç›‘å¬å’Œè¿›è¡Œå¤„ç†ï¼Œæ˜¯æ•´ä¸ªwebåº”ç”¨çš„å¯åŠ¨å™¨ (func) ListenAndServeTLS(addr, certFile, keyFile string, handler Handler) error: ListenAndServeçš„httpsç‰ˆæœ¬ ","date":"2022-07-30","objectID":"/go-web/:1:2","series":null,"tags":["Go","Web"],"title":"Go Webç¼–ç¨‹","uri":"/go-web/#--æœåŠ¡å™¨"},{"categories":["Go"],"content":"\r$ å¤„ç†å™¨å’Œå¤„ç†å™¨å‡½æ•° Go webä¸­å®é™…å¤„ç†è¯·æ±‚çš„å‡½æ•°æˆ–ç±»å‹ å¤„ç†å™¨ï¼šå®ç°äº†Handleræ¥å£çš„ä»»æ„ç±»å‹ï¼Œå¯ä»¥æ˜¯ç»“æ„ä½“ï¼Œå‡½æ•°ç±»å‹ç­‰ å¤„ç†å™¨å‡½æ•°ï¼šæ™®é€šçš„å‡½æ•°ï¼Œä½†æ˜¯å¿…é¡»è¦ä»¥ http.ResponseWriterå’Œ*http.Requestä¸ºå‚æ•° (interface) Handler {ServeHTTP(ResponseWriter, *Request)}: å¤„ç†å™¨æ¥å£ï¼Œå®ç°äº†è¯¥æ¥å£çš„å³ä¸ºå¤„ç†å™¨ (func) http.Handle(pattern string, handler Handler): å°†Handlerå’ŒDefaultServeMux (æˆ–è‡ªå®šä¹‰çš„ServeMux) ç»‘å®šï¼Œä½¿å…¶å¤„ç†patternä¸Šçš„è¯·æ±‚ã€‚å®è´¨æ˜¯ServeMuxçš„æ–¹æ³•ï¼Œæ–¹ä¾¿è°ƒç”¨æ•…åœ¨httpåŒ…ä¸­åˆ›å»ºã€‚å®è´¨: // http.Handle func Handle(pattern string, handler Handleer) { DefaultServeMux.Handle(pattern, handler) } // åœ¨server.goæºç ä¸­ (func) http.HandleFunc(pattern string, handler func(ResponseWriter, *Request)): å°†å¤„ç†å™¨å‡½æ•°ä¸ServeMuxç»‘å®šå¹¶ç›‘å¬patternè·¯å¾„ã€‚å®è´¨ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªHandler: // http.HandleFunc func HandleFunc(pattern string, handler func(ResponseWriter, *Request)) { DefaultServeMux.HandleFunc(pattern, handler) } // ServeMux.HandleFunc func (mux *ServeMux) HandleFunc(pattern string, handler func(ResponseWriter, *Request)) { mux.Handle(pattern, HandlerFunc(handler)) } // é€šè¿‡æ˜¾å¼ç±»å‹è½¬æ¢å°†åº•å±‚ç±»å‹ç›¸åŒçš„handlerè½¬æ¢ä¸ºHandlerFuncç±»å‹ // HandlerFuncæ˜¯ä¸ªå‡½æ•°ç±»å‹ type HandlerFunc func(ResponseWriter, *Request) /*å¹¶ä¸”å®ƒå®ç°äº†Handleræ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ HandlerFuncç±»å‹æ˜¯ä¸ªå¤„ç†å™¨(Handler), æ•…è°ƒç”¨HandleFuncæ–¹æ³•å®è´¨æ˜¯è°ƒç”¨Handleæ–¹æ³•ï¼Œ ä¸”å°†ä¸€ä¸ªæ™®é€šå‡½æ•°ç±»å‹çš„å‚æ•°è½¬æ¢æˆäº†ä¸€ä¸ªå¤„ç†å™¨ */ func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) { f(w, r) } ","date":"2022-07-30","objectID":"/go-web/:1:3","series":null,"tags":["Go","Web"],"title":"Go Webç¼–ç¨‹","uri":"/go-web/#--å¤„ç†å™¨å’Œå¤„ç†å™¨å‡½æ•°"},{"categories":["Java"],"content":"\r$ å‰è¨€ä¹‹å‰å°±æœ‰ä¸ªæƒ³æ³•æŠŠbotç”¨springé‡å†™ä¸€ä¸‹ã€‚äº†è§£å®Œä¸€äº›åŸºç¡€çš„ä¸œè¥¿åç»ˆäºèƒ½å¼€å†™äº†ã€‚ ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:1:0","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-å‰è¨€"},{"categories":["Java"],"content":"\r$ åŸºäºæ³¨è§£åŠ åå°„","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:2:0","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-åŸºäºæ³¨è§£åŠ åå°„"},{"categories":["Java"],"content":"\r$ æ¨è¿™ä¸€ç‚¹æ˜¯çœ‹äº†è¯ºå¤©çš„åšå®¢ã€‚ ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:2:1","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-æ¨"},{"categories":["Java"],"content":"\r$ æ€è·¯ å†™ä¸ªè‡ªå®šä¹‰æ³¨è§£ç”¨ä»¥æ ‡è®°æ–¹æ³• åˆ©ç”¨springè‡ªå¸¦çš„SpringUtil.getApplicationContext().getBeansWithAnnotation(Controller.class)æ¥è·å–æ‰€æœ‰è¢«@Controlleræ ‡è®°çš„ç±»çš„beanã€‚ ã€æ³¨ï¼š è¿™é‡Œçš„SpringUtilæ˜¯ä½ è‡ªå·±çš„å†™çš„ä»»æ„å®ç°äº†ApplicationContextAwareæ¥å£çš„ç±»çš„åå­—ã€‚å¹¶ä¸”æ³¨è§£ç±»å‹å¿…é¡»æ˜¯Springé‡Œçš„æ³¨è§£ï¼ˆ@Controller,@Componentç­‰ï¼Œä¸ç„¶è·å–ä¸åˆ°bean åˆ©ç”¨åå°„çš„ç›¸å…³æ–¹æ³•è·å–æ‰€æœ‰æ–¹æ³•ã€‚å†åšä¸ªéå†ç­›é€‰å‡ºå¸¦æœ‰è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ³•åŠ å…¥ä¸€ä¸ªåˆ—è¡¨ã€‚ ç›‘å¬å™¨ä¸­è°ƒç”¨è¿™ä¸ªåˆ—è¡¨è¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œç¡®å®šä»€ä¹ˆæ—¶å€™è°ƒç”¨å¹¶ä¼ å…¥æ–¹æ³•éœ€è¦çš„å®å‚ è¿™æ ·å‘æ¶ˆæ¯çš„æ—¶å€™å°±èƒ½å®ç°è‡ªåŠ¨åˆ¤æ–­å¹¶æ‰§è¡Œ ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:2:2","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-æ€è·¯"},{"categories":["Java"],"content":"\r$ è¡¥å……åšå®¢é‡Œå†™çš„å·²ç»å¾ˆè¯¦ç»†äº†ã€‚ä½†æ˜¯æ€»æ„Ÿè§‰æœ‰äº›åŠŸèƒ½è¿˜å¯ä»¥å†è¡¥å……ä¸€ä¸‹ï¼š é€»è¾‘åˆ¤æ–­å’Œå¤šç§æƒé™ï¼š ä¸€ï¼šè¯ºå¤©å†™çš„æ¶ˆæ¯çš„é€»è¾‘åˆ¤æ–­æ˜¯æ”¾åœ¨æ³¨è§£ä¸­ï¼Œå†å’Œbotæ¥æ”¶åˆ°çš„æ¶ˆæ¯è¿›è¡Œå¯¹æ¯”æ¥å®ç°çš„ã€‚ä½†æ˜¯è¿™æ · é€»è¾‘ä¸€å¤æ‚å°±ä¼šè®©ç›‘å¬å™¨å¤ªå†—æ‚ã€‚ äºŒï¼šä¸€ä¸ªæ³¨è§£åªèƒ½è®©ä¸€ä¸ªæ–¹æ³•ç”¨äºGroupæˆ–Friendï¼Œæ²¡æ³•å¤šä¸ªæƒé™ è§£å†³æ–¹æ¡ˆï¼š (ä¸€)è®©æ³¨è§£å¯é‡å¤ï¼Œå¢åŠ æ³¨è§£å…ƒç´  @Eventæ³¨è§£ï¼š @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) @Repeatable(Events.class) // å…ƒæ³¨è§£ï¼Œä½¿è¯¥æ³¨è§£èƒ½é‡å¤ã€‚@Eventsæ˜¯å«æœ‰ è¿”å›Event[] çš„æ–¹æ³•çš„æ³¨è§£ public @interface Event { EventEnum eventType() default EventEnum.NONE; // EventEnumæ˜¯ä¸ªæšä¸¾ç±» boolean authority() default false; // ç¬¬ä¸€å±‚åˆ¤æ–­,æ˜¯å¦å¼€å¯è¿™ä¸ªæ–¹æ³• boolean judgeByMethod() default false; // å¤æ‚åˆ¤æ–­æ—¶å¼€å¯è¿™ä¸ª String message() default \"\"; // ç¬¬äºŒå±‚åˆ¤æ–­,è§¦å‘æ¡ä»¶ } @Eventsæ³¨è§£ï¼š @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) public @interface Events { Event[] value(); } æ³¨æ„@Eventsæ³¨è§£å¿…é¡»å†™@Targetï¼Œä¸”å…ƒç´ ç±»å‹æ˜¯@Eventçš„å­é›† (äºŒ)é™¤äº†messageçš„åˆ¤æ–­ï¼Œå†åœ¨åå°„æ—¶æŠŠMessageChainä¼ è¿›å»ã€‚ å¤æ‚çš„æ–¹æ³•æŠŠjudgeByMethodè®¾ä¸ºtrueï¼Œè®©æ–¹æ³•åˆ©ç”¨MessageChainè·å¾—æ¶ˆæ¯è¿›è¡Œé€»è¾‘å¤„ç† ç®€å•çš„æ–¹æ³•æŠŠjudgeByMethodè®¾ä¸ºfalseï¼Œåˆ©ç”¨messageæ³¨è§£å…ƒç´ åœ¨ç›‘å¬å™¨ä¸­è¿›è¡Œequalsåˆ¤æ–­ ç»“æœï¼šåˆ©ç”¨authorityå’Œmessageæ¥çµæ´»åˆ†é…æƒé™(è™½ç„¶ä¹Ÿä¸çµæ´»å°±æ˜¯äº†)ï¼›judgeByMethodå®ç°åˆ¤æ–­æƒé™è½¬ç§» ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:2:3","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-è¡¥å……"},{"categories":["Java"],"content":"\r$ åŸºäºæ³¨è§£å’Œåˆ‡é¢ç¼–ç¨‹(Aop)å› ä¸ºAopæ˜¯æ ¹æ®åå°„å¼€å‘çš„ï¼Œäºæ˜¯æˆ‘æƒ³èƒ½ä¸èƒ½ç”¨Aopå†™ä¸€ä¸ªã€‚ ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:3:0","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-åŸºäºæ³¨è§£å’Œåˆ‡é¢ç¼–ç¨‹aop"},{"categories":["Java"],"content":"\r$ æ€è·¯åˆ©ç”¨Aopå¯¹è¢«æŒ‡å®šæ³¨è§£æ ‡è®°çš„æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚åœ¨æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œä¸€ä¸ªåˆ¤æ–­ã€‚ ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:3:1","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-æ€è·¯-1"},{"categories":["Java"],"content":"\r$ ä»£ç Aopéƒ¨åˆ†ï¼š ç±»ä¸Šæ ‡æ³¨@Aspectæ³¨è§£ // åˆ‡å…¥ç‚¹ å®é™…åˆ‡å…¥çš„æ–¹æ³• // æ³¨æ„æ˜¯å¯¹Eventsåˆ‡å…¥ï¼Œå› ä¸ºå¤šä¸ªEventæ³¨è§£å…¶å®åœ¨è·å–çš„æ—¶å€™ä¼šè½¬æ¢æˆ@Events({@Event(xx), @Event(xx)}) @PointCut(\"@annotation(com.yanfang.animabotaop.annotations.Events)\") public void judgeMethodPointCut() {} // åˆ‡å…¥æ–¹æ³•$ // ç¯ç»•é€šçŸ¥ // \u0026\u0026 @annotation(events)æ˜¯ä¼ å…¥å‚æ•°ç»™é€šçŸ¥æ–¹æ³•çš„ä¸€ç§æ‰‹æ®µï¼Œå¯ä»¥çœå»å£°æ˜ // aroundæ–¹æ³•å‚æ•°åè¦å’Œ@Aroundä¸­ä¸€è‡´ // ProceedingJoinPoint æ˜¯ç¯ç»•é€šçŸ¥ç‰¹æœ‰çš„ï¼Œæ˜¯JoinPointçš„å­æ¥å£ï¼Œå…¶ä»–é€šçŸ¥ä¸ºJoinPointã€‚ // è¯¥å‚æ•°çš„åŠŸèƒ½å¾ˆå¼ºå¤§ @Around(\"judgeMethodPointCut() \u0026\u0026 @annotation(events)\") public void around(@NotNull ProceedingJoinPoint jpt, @NotNull Events events) throws Throwable { for (Event eventAnnotation : events.value()) { // è·å–å®å‚å€¼ï¼ˆæ³¨æ„æ˜¯â€œå€¼â€ Object[] argValues = jpt.getArgs(); // è·å–ä¼ å…¥çš„eventï¼Œè¿™é‡Œé»˜è®¤æ‰€æœ‰æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯MessageEvent MessageEvent event = (MessageEvent) argValues[0]; // è¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œè¿™é‡Œå’Œç”¨åå°„æ—¶ä¸€æ · if (eventAnnotation.authority()) { System.out.println(\"å·²æˆæƒ\"); // æœ‰å¤æ‚é€»è¾‘å°±å°†judgeByMethodè®¾ä¸ºtrueï¼Œ äº¤ç»™æ–¹æ³•è¿›è¡Œå¤æ‚é€»è¾‘å¤„ç† if (eventAnnotation.judgeByMethod() || (eventAnnotation.message().equals(event.getMessage().contentToString()))) { if (event.getSubject() instanceof Group \u0026\u0026 eventAnnotation.eventType() == EventEnum.GROUPEVENT) { joinPoint.proceed(argValues); } else if (event.getSubject() instanceof Friend \u0026\u0026 eventAnnotation.eventType() == EventEnum.MASTEREVENT) { joinPoint.proceed(argValues); } else if (event.getSubject() instanceof Member \u0026\u0026 eventAnnotation.eventType() == EventEnum.TEMPEVENT) { joinPoint.proceed(argValues); } } } } } ç›‘å¬å™¨æ–¹æ³•æ–¹é¢ï¼š @EventHandler public ListeningStatus onMessage(@NotNull MessageEvent event) throws Exception { @NotNull Test test = SpringUtil.getBean(Test.class); test.test(event); return ListeningStatus.LISTENING; } æµ‹è¯•ç±»ï¼š @Controller public class Test { @Events(@Event(eventType = EventEnum.MASTEREVENT, authority = true, message = \"test\")) public void test(MessageEvent event) { if (event == null) System.out.println(\"event ä¸ºç©º\"); else event.getSubject().sendMessage(\"get\"); } } ç»“æœï¼š authorityä¸ºtrueæ—¶å‘é€äº†getï¼Œ ä¸ºfalseæ—¶æ²¡å‘é€getã€‚è¯´æ˜æ‰§è¡Œäº†ç¯ç»•é€šçŸ¥ ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:3:2","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-ä»£ç "},{"categories":["Java"],"content":"\r$ å‘ æ³¨æ„Aopå’Œåå°„ä¸åŒçš„ä¸€ç‚¹æ˜¯ï¼šåå°„å¯ä»¥å¸®åŠ©ä¼ å…¥å®å‚ï¼›è€ŒAopåªèƒ½è·å–æ–¹æ³•è¢«ä¼ å…¥çš„å®å‚è¿›è¡Œå¤„ç†ï¼Œè€Œä¸èƒ½ä¼ å…¥å‚æ•°ï¼ˆæ¯•ç«ŸAopçš„åŸè¡·æ˜¯ä¸å½±å“æ–¹æ³•æœ¬èº«çš„æƒ…å†µä¸‹è¿›è¡Œå¯¹æ–¹æ³•çš„å¢å¼ºã€‚ è€Œå®å‚åœ¨ç›‘å¬å™¨æ–¹æ³•é‡Œä¼ å…¥ è¿™é‡Œä¸èƒ½é€šè¿‡è·å–æ‰€æœ‰Eventæ³¨è§£ï¼Œ å†åˆ†åˆ«è¿›è¡Œå¤„ç†ï¼Œè€Œéœ€è¦è·å–@Eventsï¼Œå†é€šè¿‡å®ƒçš„value()å…ƒç´ è·å–æ‰€æœ‰çš„@Eventæ³¨è§£ [å³ä½¿è¡¨é¢ä¸Šå¯ä»¥åœ¨æ–¹æ³•ä¸Šå¤šå†™å‡ ä¸ª@Eventæ³¨è§£ã€‚ä½†å®é™…æ˜¯@Events({@Event(...), @Event(...)}),ä½†æ˜¯ç”¨åå°„å¥½åƒå¯ä»¥ç›´æ¥è·å–å¤šä¸ª@Eventæ³¨è§£è¿›è¡Œéå†å¤„ç† æ³¨æ„é€šçŸ¥çš„æ–¹æ³•around()ä¼ å‚ä¸èƒ½ç›´æ¥ä¼ å…¥ï¼Œè€Œæ˜¯éœ€è¦åœ¨@Aroundä¸­ä¼ å…¥ã€‚å¦åˆ™ä¼šæŠ¥ç©ºã€‚ï¼ˆå…¶å®æ˜¯è·å–æ–¹æ³•ä¸Šçš„@Eventsæ³¨è§£ï¼Œç„¶åä¼ è¿›around()æ–¹æ³• ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:3:3","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-å‘"},{"categories":["Java"],"content":"\r$ æ¯”è¾ƒä¸æ€»ç»“æ€»çš„æ¥è¯´ï¼Œå„æœ‰ä¼˜ç¼ºã€‚ åå°„ï¼šå…ˆè¿›è¡Œåˆ¤æ–­ï¼Œç„¶åå†æ ¹æ®åˆ¤æ–­ç»“æœæ¥å†³å®šæ˜¯å¦æ‰§è¡Œæ–¹æ³• Aopï¼šè¦å…ˆè°ƒç”¨æ–¹æ³•ï¼ˆæ³¨æ„è¿˜å¹¶æ²¡æœ‰å®é™…æ‰§è¡Œï¼‰ï¼Œè¿›è€Œä¼šè§¦å‘é€šçŸ¥ï¼Œç”¨é€šçŸ¥ä¸­çš„æ–¹æ³•è¿›è¡Œé€»è¾‘åˆ¤æ–­ åå°„ä»£ç è¾ƒå¤šï¼Œä½†æ˜¯å¤„ç†ä¸Šæ›´çµæ´»ï¼Œä¸å¿…å…ˆè°ƒç”¨æ–¹æ³• Aopè¦å…ˆè°ƒç”¨æ–¹æ³•ï¼Œæ‰ä¼šè§¦å‘é€šçŸ¥ï¼Œä½†æ˜¯ä»£ç é‡æ›´å°‘ï¼Œæ›´ç®€æ´ ","date":"2022-07-29","objectID":"/rewrite-bot-with-aop-and-reflection/:4:0","series":null,"tags":["Java","Aop","QQ bot"],"title":"ç”¨aopå’Œæ³¨è§£é‡å†™bot","uri":"/rewrite-bot-with-aop-and-reflection/#-æ¯”è¾ƒä¸æ€»ç»“"},{"categories":null,"content":"\råç«¯æŒ‡å—\råç«¯çš„å¼•è·¯äººï¼Œæœ‰ç‹¬ç‰¹çš„äººæ ¼é­…åŠ› åç«¯æŒ‡é‰´\rç«‹å¿—æŒæ§ç½‘ç»œçš„ç”·äºº ç‹ æˆ³è¿™é‡Œ\ræˆ‘æœ€æ•¬ä½©å’Œå°Šæ•¬çš„äººä¹‹ä¸€ï¼Œæ˜¯å‚²å¨‡ç¬¨è›‹ ç»¼åˆè®­ç»ƒè¥\rä¸åªæ˜¯åç«¯å¤§æ‰‹å­ï¼Œæ¯”è¾ƒä½©æœçš„åç«¯æ‰‹ ç¾å°‘å¥³é›†ç¾¤\rcxy..å˜¿å˜¿ï¼Œæ˜¯ç¾å°‘å¥³æ åç«¯å…¨åŠŸèƒ½å¤§çˆ¹\rå¿«æ¥çœ‹èŒç‹ åç«¯é¡¶æ¢\rå¿«æ¥ åŸ è®­ç»ƒäººå·¥æ™ºèƒ½è®¤å‡ºä½ çš„è€å©†.jpg\rå‰ç«¯çˆ¹ï¼Œä¸ä¼šï¼Œæ•™æ•™ ","date":"2022-08-02","objectID":"/links/:0:0","series":null,"tags":null,"title":"å‹é“¾","uri":"/links/#"},{"categories":["Python"],"content":"\r$ å‰è¨€Pythonä¸­çš„ä¸€åˆ‡çš†å¯¹è±¡ã€‚åŒæ ·å‡½æ•°ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ è£…é¥°å™¨ï¼ˆå½¢å¦‚@staticmethod, @overloadç­‰ï¼‰å…¶å®æ˜¯ä¸€ä¸ªè£…é¥°å™¨å‡½æ•°æˆ–ä¸€ä¸ªè£…é¥°å™¨ç±»å¯¹è£…é¥°å™¨è£…é¥°çš„å‡½æ•°çš„å¯¹è±¡çš„è°ƒç”¨å†èµ‹å€¼çš„è¿‡ç¨‹, è¡¨é¢ä¸Šä½“ç°ä¸ºä»¥å‡½æ•°å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚ ","date":"2022-07-30","objectID":"/decorator-in-python/:1:0","series":null,"tags":["Python","è£…é¥°å™¨"],"title":"Pythonä¸­çš„è£…é¥°å™¨","uri":"/decorator-in-python/#-å‰è¨€"},{"categories":["Python"],"content":"\r$ å®è´¨\rç†è§£è£…é¥°å™¨\r@decorator function_name() # ç­‰ä»·äºï¼š function_name = decorator(function_name) #ï¼ˆå…¶ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªè£…é¥°å™¨å‡½æ•°ï¼š def decorator(f): @wraps(f) def xxx(xx, xx...): ... # è°ƒç”¨å‰ return f() # æˆ–è€…ç›´æ¥f()æ¥è°ƒç”¨å‡½æ•° ... # è°ƒç”¨å return xxx ","date":"2022-07-30","objectID":"/decorator-in-python/:1:1","series":null,"tags":["Python","è£…é¥°å™¨"],"title":"Pythonä¸­çš„è£…é¥°å™¨","uri":"/decorator-in-python/#-å®è´¨"},{"categories":["Python"],"content":"\r$ æ™®é€šè£…é¥°å™¨(ç›´æ¥æ‹¿èœé¸Ÿæ•™ç¨‹çš„ä¾‹å­) ç¤ºä¾‹ä¸€ï¼š def a_new_decorator(a_func): def wrap_the_function(): print(\"I am doing some boring work before executing a_func()\") a_func() print(\"I am doing some boring work after executing a_func()\") return warp_the_function def a_function_requiring_decoration(): print(\"I am the function which needs some decoration to remove my foul smell\") a_function_requiring_decoration() # outputs: \"I am the function which needs some decoration to remove my foul smell\" a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration) #now a_function_requiring_decoration is wrapped by wrap_the_function() a_function_requiring_decration() #outputs:I am doing some boring work before executing a_func() # I am the function which needs some decoration to remove my foul smell # I am doing some boring work after executing a_func() ç”¨è£…é¥°å™¨å†™ @a_new_decorator def a_function_requring_decoration(): print(\"I am a function which needs some decoration to\" \"remove my foul smell\") a_function_requiring_decoration() # outputs: I am doing some boring work before executing a_func() # I am the function which needs some decoration to remove my foul smell # I am doing some boring work after executing a_func() #the @a_new_decorator is just a short way of saying: a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration) ç‰¹æ®Šç‚¹ï¼š print(a_function_requiring_decoration.__name__) # Output: wrap_the_function æ³¨æ„\rå¹¶æ²¡æœ‰è¾“å‡º\"a_function_requiring_decoration\"ã€‚è€Œè¢«\"wrap_the_function\"æ›¿ä»£äº†ã€‚ è§£å†³æ–¹æ¡ˆ from functools import wraps def a_new_decorator(a_func): @wrap(a_func) def wrap_the_function(): print(\"I am doing some boring work before execting a_func\") a_func() print(\"I am doing some boring work after exexting a_func()\") return wrap_the_function @a_new_decorator def a_function_requring_decoration(): print(\"I am the function which needs some decoration to \" \"remove my foul smell\") print(a_function_requiring_decoration.__name__) # Output: a_function_requiring_decoration ","date":"2022-07-30","objectID":"/decorator-in-python/:2:0","series":null,"tags":["Python","è£…é¥°å™¨"],"title":"Pythonä¸­çš„è£…é¥°å™¨","uri":"/decorator-in-python/#-æ™®é€šè£…é¥°å™¨"},{"categories":["Python"],"content":"\r$ å¸¦å‚æ•°çš„è£…é¥°å™¨ æ€è·¯ï¼š åˆ›å»ºä¸€ä¸ªåŒ…è£¹å‡½æ•°ã€‚åœ¨è£…é¥°å™¨å‡½æ•°å¤–é¢åŒ…ä¸€å±‚ã€‚ ä¾‹ï¼š from functools import wraps def logit(logfile=\"out.log\"): def logging_decrator(func): @wraps(func) def wrapped_function(*args, **kwargs): log_string = func.__name__ + \"was called\" print(log_string) # æ‰“å¼€lgofileï¼Œå¹¶å†™å…¥å†…å®¹ with open(logfile, \"a\") as f: f.write(log_string + \"\\n\") return func(*args, **kargs) return wrapped_function return logging_decorator @logit() def myfunc1(): pass myfunc1() # Output: myfunc1 was called # ç°åœ¨ä¸€ä¸ªå«åš out.log çš„æ–‡ä»¶å‡ºç°äº†ï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯ä¸Šé¢çš„å­—ç¬¦ä¸² @logit(logfile='func2.log') def myfunc2(): pass myfunc2() # Output: myfunc2 was called # ç°åœ¨ä¸€ä¸ªå«åš func2.log çš„æ–‡ä»¶å‡ºç°äº†ï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯ä¸Šé¢çš„å­—ç¬¦ä¸² ","date":"2022-07-30","objectID":"/decorator-in-python/:3:0","series":null,"tags":["Python","è£…é¥°å™¨"],"title":"Pythonä¸­çš„è£…é¥°å™¨","uri":"/decorator-in-python/#-å¸¦å‚æ•°çš„è£…é¥°å™¨"},{"categories":["Python"],"content":"\r$ åº”ç”¨åœºæ™¯\ræŠ€å·§\ræˆæƒ æ—¥å¿— ","date":"2022-07-30","objectID":"/decorator-in-python/:4:0","series":null,"tags":["Python","è£…é¥°å™¨"],"title":"Pythonä¸­çš„è£…é¥°å™¨","uri":"/decorator-in-python/#-åº”ç”¨åœºæ™¯"},{"categories":["Python"],"content":"\r$ è£…é¥°å™¨ç±» å½“ä½ æƒ³åˆ©ç”¨è£…é¥°å™¨æ‰§è¡Œä¸æ­¢ä¸€ä¸ªæ“ä½œæ—¶ï¼Œå¯ä»¥ç”¨æ¥ç±»æ¥åŒ…è£…ã€‚ ä¾‹ï¼š from functools import wraps class Logit(object): def __init__(self, logfile='out.log'): self.logfile = logfile def __call__(self, func): @wraps(func) def wrapped_function(*args, **kargs): log_string = func.__name__ + \"was called\" print(log_string) # æ‰“å¼€logfileå¹¶å†™å…¥ with open(self.logfile, 'a') as f: f.write(log_string + '\\n') # ç°åœ¨ï¼Œå‘é€ä¸€ä¸ªé€šçŸ¥ self.notify() return func(*args, **kargs) return wrapped_function def notify(self): # è¯¥ç±»ä¸ºlogitç±»ï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼Œäº¤ä¸ªå­ç±» pass class EmailLogit(Logit): \"\"\" Logitå­ç±»,å®ç°æ—¥å¿—è®°å½•çš„åŒæ—¶å‘é‚®ä»¶ \"\"\" def __init__(self, email=\"admin@myproject.com\", *args, **kargs): self.email = email super(EmailLogit, self).__init__(*args, **kargs) def notify(self): # å…·ä½“å®ç° ... # è°ƒç”¨æ—¶ä¸è£…é¥°å™¨å‡½æ•°ç±»ä¼¼ã€‚ä½¿ç”¨@Logit ","date":"2022-07-30","objectID":"/decorator-in-python/:5:0","series":null,"tags":["Python","è£…é¥°å™¨"],"title":"Pythonä¸­çš„è£…é¥°å™¨","uri":"/decorator-in-python/#-è£…é¥°å™¨ç±»"},{"categories":["Python"],"content":"\r$ å‰è¨€yieldæ˜¯Pythonæå…¶é‡è¦çš„ä¸€ä¸ªå…³é”®å­—ï¼Œå®ƒä¸Pythonä¸­çš„ç”Ÿæˆå™¨å¯†åˆ‡ç›¸å…³ï¼Œç„¶è€Œyieldçš„ç”¨æ³•å’Œç”Ÿæˆå™¨æœ¬èº«æ—¶ä¸æ—¶è®©äººå›°æƒ‘â€¦ ","date":"2022-07-29","objectID":"/generator-in-python/:1:0","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-å‰è¨€"},{"categories":["Python"],"content":"\r$ ç”Ÿæˆå™¨å’Œyieldæœ‰ä»€ä¹ˆç”¨ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨yieldéƒ½æ˜¯ä¸ºäº†å°†å‡½æ•°ä½œä¸ºç”Ÿæˆå™¨ä½¿ç”¨(yieldåªèƒ½åœ¨å‡½æ•°ä¸­ä½¿ç”¨) å½“æœ‰å¤§é‡æ•°æ®éœ€è¦è¿”å›æ—¶ç”Ÿæˆå™¨èƒ½å¤ŸèŠ‚çœå†…å­˜ç©ºé—´ ","date":"2022-07-29","objectID":"/generator-in-python/:2:0","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-ç”Ÿæˆå™¨å’Œyieldæœ‰ä»€ä¹ˆç”¨"},{"categories":["Python"],"content":"\r$ ä¸€äº›æ¦‚å¿µ","date":"2022-07-29","objectID":"/generator-in-python/:3:0","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-ä¸€äº›æ¦‚å¿µ"},{"categories":["Python"],"content":"\r$ å¯è¿­ä»£å¯¹è±¡ Pythonä¸­çš„ä»»æ„å¯¹è±¡ï¼Œåªè¦å®ƒå®šä¹‰äº†å¯ä»¥è¿”å›ä¸€ä¸ªè¿­ä»£å™¨çš„__iter__æ–¹æ³•ï¼Œæˆ–è€…å®šä¹‰äº†å¯ä»¥æ”¯æŒä¸‹æ ‡ç´¢å¼•çš„__getitem__æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚ ç®€å•è¯´ï¼Œå¯è¿­ä»£å¯¹è±¡å°±æ˜¯èƒ½æä¾›è¿­ä»£å™¨çš„ä»»æ„å¯¹è±¡ ","date":"2022-07-29","objectID":"/generator-in-python/:3:1","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-å¯è¿­ä»£å¯¹è±¡"},{"categories":["Python"],"content":"\r$ è¿­ä»£å™¨ ä»»æ„å¯¹è±¡ï¼Œåªè¦å®ƒå®šä¹‰äº†nextï¼ˆPython2ï¼‰æˆ–__next__æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ ","date":"2022-07-29","objectID":"/generator-in-python/:3:2","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-è¿­ä»£å™¨"},{"categories":["Python"],"content":"\r$ è¿­ä»£ ç”¨ç®€å•çš„è¯è®²ï¼Œå®ƒå°±æ˜¯ä»æŸä¸ªåœ°æ–¹ï¼ˆæ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨ï¼‰å–å‡ºä¸€ä¸ªå…ƒç´ çš„è¿‡ç¨‹ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¾ªç¯æ¥éå†æŸä¸ªä¸œè¥¿æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ¬èº«å°±å«è¿­ä»£ ","date":"2022-07-29","objectID":"/generator-in-python/:3:3","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-è¿­ä»£"},{"categories":["Python"],"content":"\r$ ç”Ÿæˆå™¨","date":"2022-07-29","objectID":"/generator-in-python/:4:0","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-ç”Ÿæˆå™¨"},{"categories":["Python"],"content":"\r$ æ¦‚å¿µ ç”Ÿæˆå™¨ä¹Ÿæ˜¯ä¸€ç§è¿­ä»£å™¨ï¼Œä½†æ˜¯ä½ åªèƒ½å¯¹å…¶è¿­ä»£ä¸€æ¬¡ã€‚è¿™æ˜¯å› ä¸ºå®ƒä»¬å¹¶æ²¡æœ‰æŠŠæ‰€æœ‰çš„å€¼å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶ç”Ÿæˆå€¼ ä½ é€šè¿‡éå†æ¥ä½¿ç”¨å®ƒä»¬ï¼Œè¦ä¹ˆç”¨ä¸€ä¸ª\"for\"å¾ªç¯ï¼Œè¦ä¹ˆå°†å®ƒä»¬ä¼ é€’ç»™ä»»æ„å¯ä»¥è¿›è¡Œè¿­ä»£çš„å‡½æ•°ï¼ˆæ¯”å¦‚next()ï¼‰æˆ–ç»“æ„ å¤§å¤šæ•°æ—¶å€™ç”Ÿæˆå™¨æ˜¯ä»¥å‡½æ•°æ¥å®ç°çš„ï¼ˆå½“ç„¶ï¼Œç±»ä¹Ÿå¯ä»¥ï¼Œä½†å‡½æ•°è¾ƒä¸ºç®€ä¾¿ï¼‰ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¹¶ä¸è¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯yieldï¼ˆäº§ç”Ÿï¼‰ä¸€ä¸ªå€¼ ","date":"2022-07-29","objectID":"/generator-in-python/:4:1","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-æ¦‚å¿µ"},{"categories":["Python"],"content":"\r$ ä¸€äº›ä¾‹å­æ­£å¸¸æ€è·¯çš„æ–æ³¢é‚£å¥‘: def fab(max): n, a, b = 0, 0, 1 L = [] # æ‹¿ä¸€ä¸ªåˆ—è¡¨æ¥å­˜æ•°æ®ï¼Œæé«˜å¤ç”¨æ€§ while n \u003c max: L.append(b) a, b = b, a + b n = n + 1 return L for n in fab(5): print(n) è¿™ä¹ˆåšä¼šä½¿è¯¥å‡½æ•°çš„å†…å­˜å ç”¨éšå‚æ•°maxå¢å¤§è€Œå¢åŠ ã€‚ ç”Ÿæˆå™¨ç±»æ„å»ºçš„æ–æ³¢é‚£å¥‘: class Fab: def __init__(self, max): self.max = max self.n, self.a, self.b = 0, 0, 1 def __iter__(self): return self def __next__(self): if self.n \u003c self.max: r = self.b self.a, self.b = self.b, self.a + self.b self.n = self.n + 1 return r raise StopIteration() for n in Fab(5): print(n) ç”Ÿæˆå™¨å‡½æ•°æ„å»ºçš„æ–æ³¢é‚£å¥‘: def fab(n): a = b = 1 for i in range(n): yield a a, b = b, a + b ","date":"2022-07-29","objectID":"/generator-in-python/:4:2","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-ä¸€äº›ä¾‹å­"},{"categories":["Python"],"content":"\r$ ä¸€äº›å…³äºè¿­ä»£å™¨çš„å†…ç½®å‡½æ•° next() è·å–è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå€¼ iter() ä»¥å¯è¿­ä»£å¯¹è±¡ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²ï¼‰ä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ ","date":"2022-07-29","objectID":"/generator-in-python/:4:3","series":null,"tags":["Python","ç”Ÿæˆå™¨"],"title":"Pythonä¸­çš„ç”Ÿæˆå™¨","uri":"/generator-in-python/#-ä¸€äº›å…³äºè¿­ä»£å™¨çš„å†…ç½®å‡½æ•°"},{"categories":null,"content":" æ‚¨å°šæœªè¿æ¥ç”Ÿå‘½ä¹‹æºæ ","date":"0001-01-01","objectID":"/offline/:0:0","series":null,"tags":null,"title":"ç¦»çº¿å‘œå‘œ","uri":"/offline/#"}]